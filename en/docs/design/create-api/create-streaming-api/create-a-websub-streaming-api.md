# Create a WebSub API

Follow the instructions below to create a WebSub API using the basic flow.

### Design a WebSub API

1.  Sign in to the WSO2 API Manager (WSO2 API-M) Publisher Portal `https://<hostname>:9443/publisher` (e.g., `https://localhost:9443/publisher`).

2.  Go to **CREATE API** and Click **Design New Streaming API**.

    [![Design New Streaming API]({{base_path}}/assets/img/learn/design-api/streaming-api/design-new-streaming-api.png)]({{base_path}}/assets/img/learn/design-api/streaming-api/design-new-streaming-api.png)

    <html><div class="admonition note">
      <p class="admonition-title">Note</p>
      <p>The <b>CREATE</b> button will only appear for a user who has the <code>creator</code> role permission.</p>
      </div>
    </html>

3.  Enter the details of the new WebSub API.

     <table>
     <thead>
     <tr>
     <th><b>Field</b></th>
     <th><b>Sample value</b></th>
     </tr>
     </thead>
     <tbody>
     <tr>
     <td>Name</td>
     <td>RepoWatcher</td>
     </tr>
     <tr>
     <td>Context</td>
     <td>/repo-watcher</td>
     </tr>
     <tr>
     <td>Version</td>
     <td>1.0.0</td>
     </tr>
     <tr>
     <td>Protocol</td>
     <td>WebSub</td>
     </tr>
     </tbody>
     </table>


4.  Click **CREATE**. 

     The overview page of the created WebSub API appears.

     [![Overview of WebSub API]({{base_path}}/assets/img/learn/tutorials/streaming-api/websub/websub-api-overview.png)]({{base_path}}/assets/img/learn/tutorials/streaming-api/websub/websub-api-overview.png)


### Configure the Topics

Topics of a WebSub API are always **Subscribe only**. By default, a WebSub API will have a topic with name `_default`.

1. Click **Show More** to navigate to the **Topics** page.

    [![WebSub API Topics]({{base_path}}/assets/img/learn/design-api/streaming-api/websub/websub-topics-show-more.png)]({{base_path}}/assets/img/learn/design-api/streaming-api/websub/websub-topics-show-more.png)

2. Modify the topics as follows and click **SAVE** to update them.

    1. Optionally click delete as shown below, to delete an existing topic.

        [![WebSub API Delete Existing Topic]({{base_path}}/assets/img/learn/design-api/streaming-api/websub/websub-delete-default-topic.png)]({{base_path}}/assets/img/learn/design-api/streaming-api/websub/websub-delete-default-topic.png)

    2. Click **Add Topic** to add a new topic.
            
        [![WebSub API Add Topic]({{base_path}}/assets/img/learn/design-api/streaming-api/websub/websub-add-topic.png)]({{base_path}}/assets/img/learn/design-api/streaming-api/websub/websub-add-topic.png)
        
        The newly added topic is displayed as follows.
            
        [![WebSub API Newly Added Topic]({{base_path}}/assets/img/learn/design-api/streaming-api/websub/websub-api-newly-added-topic.png)]({{base_path}}/assets/img/learn/design-api/streaming-api/websub/websub-api-newly-added-topic.png)

        Expand the created topic to view its **Callback URL**. This can be used when registering the topic with a webhook provider. For a detailed tutorial, see [Create and Publish a WebSub API]({{base_path}}/tutorials/streaming-api/create-and-publish-websub-api).


### View the AsyncAPI Definition

Click **API Definition**. The Async Specification of API appears.


### View the AsyncAPI Definition

Click **API Definition**. The Async Specification of API appears.


### Configure the Runtime Configurations

1. Click **Runtime Configuration**. 

    Transport Level Security  defines the transport protocol on which the API is exposed.  

    [![WebSub API Runtime Configurations Page]({{base_path}}/assets/img/learn/design-api/streaming-api/websub/websub-api-runtime-configurations.png)]({{base_path}}/assets/img/learn/design-api/streaming-api/websub/websub-api-runtime-configurations.png)

2. If you wish to limit the API availability to only one transport (e.g., HTTPS), uncheck the **Transport Level Security** checkbox.

    Both HTTP and HTTPS transports are selected by default.

### Generate a Secret

When required by a webhook provider (eg: GitHub), the secret generated by a WebSub API can be used to register the WebSub API with the webhook provider. This is used by the webhook provider to sign the payload when sending events back to the WebSub API.
     
1. Click **Runtime** and navigate to Runtime Configurations. Expand the **Subscription** section.

     [![WebSub API Runtime Configurations]({{base_path}}/assets/img/learn/tutorials/streaming-api/websub/websub-api-runtime-configurations.png)]({{base_path}}/assets/img/learn/tutorials/streaming-api/websub/websub-api-runtime-configurations.png)
     
2. Select **SHA1** as the **Signing Algorithm**.

3. Click **Generate**, which will generate a secret.

     [![WebSub API Generate Secret]({{base_path}}/assets/img/learn/tutorials/streaming-api/websub/websub-api-generate-secret.png)]({{base_path}}/assets/img/learn/tutorials/streaming-api/websub/websub-api-generate-secret.png)
     
4. Click **Save**. 

     The generated secret can be used when registering the topic with a webhook provider. For a detailed tutorial, see [Create and Publish a WebSub API]({{base_path}}/tutorials/streaming-api/create-and-publish-websub-api).


Now, you have successfully created and configured a Streaming API. Next, let's [Publish your API]({{base_path}}/learn/design-api/publish-api/publish-an-api).

<div class="admonition note">
<p class="admonition-title">What's Next?</p>
<p>Learn more by trying out the tutorial on <a href="{{base_path}}/tutorials/streaming-api/create-and-publish-websub-api">Creating and Publishing a WebSub API</a>.</p>
</div>

!!! More

        Click the following topics to learn more on the concepts that you need to know when creating an API:
       -   [Creating A Streaming Backend]({{base_path}}/get-started/quick-start-guide/streaming-qsg)
       -   [API Visibility]({{base_path}}/learn/design-api/advanced-topics/control-api-visibility-and-subscription-availability-in-developer-portal/)
       -   [Endpoints]({{base_path}}/learn/design-api/endpoints/endpoint-types/)
       -   [Throttling Tiers]({{base_path}}/learn/rate-limiting/introducing-throttling-use-cases/)
       -   [Custom Properties]({{base_path}}/learn/design-api/create-api/adding-custom-properties-to-apis/)
       -   [API Security]({{base_path}}/learn/api-security/api-authentication/secure-apis-using-oauth2-tokens)
       -   [Life Cycle Management]({{base_path}}/learn/design-api/lifecycle-management/api-lifecycle/)
       -   [API Documentation]({{base_path}}/learn/design-api/api-documentation/add-api-documentation/)
       -   [API Monetization]({{base_path}}/learn/api-monetization/monetizing-an-api/)
